
#include <iostream>

int* stackMemory1()
{
    int a = 1;
    return &a; 
//Тут возвращается указатель на переменную a
}

int* stackMemory2()
{
    int b = 2;
    return &b; 
// Возвращается указатель на переменную b
}

int main()
{
    int* b = stackMemory1(); 
// b указывает на переменную a
    int a1 = *b;

    int* c = stackMemory2(); // c указывает на переменную b
    int a2 = *c;
 // Разыменование c, но переменная b уже вышла из области видимости

    int a3 = *b; 
// Разыменование b, переменная a уже не существует

    std::cout << a1 << std::endl; 
// Выводится неопределенное значение
    std::cout << a2 << std::endl; 
// Выводится неопределенное значение
    std::cout << a3 << std::endl; 
// Выводится неопределенное значение

    std::cout << ((std::byte*)b - (std::byte*)c) << std::endl; 
// Неопределенное поведение, указатели разных стеков

    return 0;
}
